<link rel="import" type="html" href="../../br-icons/src/br-icons.html">

<dom-module id="br-button">

<!-- <link rel="import" type="css" href="../dist/css/br-button.min.css"> -->

<template>

	<button id$="{{id}}" type$="{{type}}" class$="{{fullClass}}" disabled$="{{isDisabled}}">
		<template is="dom-if" if="{{icon}}">
			<br-icons icon$="{{icon}}" class="icon" hidden$="{{isLoading}}"></br-icons>
		</template>
		<template is="dom-if" if="{{isLoading}}">
			<br-icons icon="br-icons:loading" class="icon icon__spin"></br-icons>
		</template>
		<template is="dom-if" if="{{label}}">{{label}}</template>
	</button>

</template>

<script>
	Polymer({
		is: 'br-button',

		properties: {
			id: String,
			label: String,
			icon: String,
			type: {
				type: String,
				value: 'button'
			},
			color: {
				type: String,
				value: 'btn'
			},
			fullClass: {
				computed: '_computeFullClass(color)'
			},
			size: String,
			block: Boolean,
			isLoading:{
				type: Boolean,
				observer: '_checkVisibility'
			}

		},

		ready: function() {
			var isDisabled = false;
			this._setupSize();
			this._checkIsBlock();
		},

		_computeFullClass: function(color) {
			if (color !== 'btn')
				return 'btn btn-' + color;
			else
				return 'btn';
		},

		_setupSize: function() {
			if (this.size) {
				var modifier;

				switch (this.size) {
					case 'large':
					modifier = 'btn-lg';
					break;

					case 'small':
					modifier = 'btn-sm';
					break;
				}
				this.$$('button').classList.add(modifier);
			}
		},

		_checkIsBlock: function() {
			if (this.block)
				this.$$('button').classList.add('btn-block');
		},

		toggleDisable: function() {
			return (this.isDisabled = !this.isDisabled);
		},

		// disable: function() {
		// 	return this.isDisabled = true;
		// },

		// enable: function() {
		// 	return this.isDisabled = false;
		// },

		_checkVisibility: function() {
			this.toggleDisable();
		}

	});
</script>
</dom-module>