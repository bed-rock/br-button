<link rel="import" type="html" href="../../br-icons/src/br-icons.html">

<dom-module id="br-button">

  <template>

    <button type$="{{type}}" class$="{{class}}">
      <template is="dom-if" if="{{icon}}">
        <br-icons icon$="{{icon}}" class="icon" hidden$="{{isLoading}}"></br-icons>
      </template>
      <template is="dom-if" if="{{isLoading}}">
        <br-icons icon="br-icons:loading" class="icon icon__spin"></br-icons>
      </template>
      <template is="dom-if" if="{{label}}">{{label}}</template>
    </button>

  </template>

  <script>
    Polymer({
      is: 'br-button',

      properties: {
        label: String,
        icon: String,
        class: String,
        type: {
          type: String,
          value: 'button'
        },
        isLoading: {
          type: Boolean,
          observer: '_isLoading'
        },
        isDisabled:{
          type: Boolean,
          observer: '_isDisabled'
        }
      },

      _isLoading: function() {
        this._toggleDisable(this.isLoading);
      },

      _isDisabled: function(){
        this._toggleDisable(this.isDisabled);
      },

      _toggleDisable: function(condition){
        if(condition)
          this.setAttribute('disabled', true);
        else
          this.removeAttribute('disabled');
      }

    });
  </script>
</dom-module>