<link rel="import" type="html" href="../../br-icons/src/br-icons.html">

<dom-module id="br-button">

<link rel="import" type="css" href="../dist/css/br-button.min.css">

<template>

	<button id$="{{id}}" type$="{{type}}" disabled$="{{isDisabled}}">
		<template is="dom-if" if="{{icon}}">
			<br-icons icon$="{{icon}}" class="icon" hidden$="{{isLoading}}"></br-icons>
		</template>
		<template is="dom-if" if="{{isLoading}}">
			<br-icons icon="br-icons:loading" class="icon icon__spin"></br-icons>
		</template>
		<template is="dom-if" if="{{label}}">{{label}}</template>
	</button>

</template>

<script>
	Polymer({
		is: 'br-button',

		properties: {
			id: String,
			label: String,
			icon: String,
			type: {
				type: String,
				value: 'button'
			},
			isLoading:{ 
				type:String,
				observer: '_checkVisibility'
			}
			
		},

		ready: function(){
			this.isDisabled = false;
			this._checkVisibility();
		},

		toggleDisable: function(){
			return (this.isDisabled = !this.isDisabled);
		},

		disable: function(){
			return this.isDisabled = true;
		},

		enable: function(){
			return this.isDisabled = false;
		},

		_checkVisibility: function(){		

			var btn = document.getElementById(this.id);

			if(this.isLoading === 'true')
				btn.setAttribute('is-loading', true)						
			else if(btn && btn.hasAttribute('is-loading'))
				btn.removeAttribute('is-loading');

			this.toggleDisable();
		}

	});
</script>
</dom-module>